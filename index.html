<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VKGAMES.FR - Plateforme de Jeux</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">

    <!-- Leaflet.js for City Guesser -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation" id="bg-animation">
        <canvas id="particles-canvas"></canvas>
        <div class="bg-gradient"></div>
        <div class="bg-noise"></div>
    </div>

    <!-- Audio Elements -->
    <audio id="bg-music" loop preload="auto">
        <source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Chad_Crouch/Arps/Chad_Crouch_-_Shipping_Lanes.mp3" type="audio/mpeg">
    </audio>
    <audio id="song-preview" preload="auto"></audio>
    <audio id="sfx-click" preload="auto">
        <source src="https://cdn.pixabay.com/audio/2022/03/10/audio_c8c8a73467.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-success" preload="auto">
        <source src="https://cdn.pixabay.com/audio/2021/08/04/audio_0625c1539c.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-error" preload="auto">
        <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7f8c1d2f5a.mp3" type="audio/mpeg">
    </audio>

    <!-- Live Players Sidebar -->
    <div class="live-sidebar" id="live-sidebar">
        <div class="live-header">
            <span class="live-dot"></span>
            <span>En direct</span>
        </div>
        <div class="live-players" id="live-players">
            <!-- Players will be inserted here -->
        </div>
    </div>

    <!-- Friends Sidebar -->
    <div class="friends-sidebar" id="friends-sidebar">
        <div class="friends-header">
            <span>üë• Amis</span>
            <button class="add-friend-btn" id="add-friend-btn" title="Ajouter un ami">‚ûï</button>
        </div>
        <div class="friends-tabs">
            <button class="friends-tab active" data-tab="online">En ligne</button>
            <button class="friends-tab" data-tab="all">Tous</button>
            <button class="friends-tab" data-tab="requests">Demandes <span class="friend-requests-count" id="friend-requests-count"></span></button>
        </div>
        <div class="friends-list" id="friends-list">
            <p class="no-friends">Connectez-vous pour voir vos amis</p>
        </div>
    </div>

    <!-- Add Friend Modal -->
    <div class="modal hidden" id="add-friend-modal">
        <div class="modal-overlay"></div>
        <div class="modal-box modal-sm">
            <h3>Ajouter un ami</h3>
            <p>Entrez le nom d'utilisateur de votre ami</p>
            <input type="text" class="modal-input" id="friend-username-input" placeholder="Nom d'utilisateur">
            <div class="modal-actions">
                <button class="btn-secondary" id="cancel-add-friend">Annuler</button>
                <button class="btn-primary" id="send-friend-request">Envoyer</button>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal hidden" id="profile-modal">
        <div class="modal-overlay"></div>
        <div class="modal-box modal-lg">
            <button class="modal-close" id="close-profile">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            <div class="profile-header">
                <div class="profile-avatar" id="profile-avatar">üë§</div>
                <div class="profile-info">
                    <h2 id="profile-username">Joueur</h2>
                    <div class="profile-rank-badge" id="profile-rank">
                        <span class="rank-icon">ü•â</span>
                        <span>Bronze</span>
                    </div>
                </div>
            </div>
            <div class="profile-level-section">
                <div class="level-display">
                    <span class="level-number" id="profile-level">Niveau 1</span>
                    <span class="level-xp" id="profile-xp">0 / 100 XP</span>
                </div>
                <div class="level-bar">
                    <div class="level-fill" id="profile-level-fill" style="width: 0%"></div>
                </div>
            </div>
            <div class="profile-stats-grid">
                <div class="profile-stat">
                    <span class="stat-value" id="profile-games">0</span>
                    <span class="stat-label">Parties jou√©es</span>
                </div>
                <div class="profile-stat">
                    <span class="stat-value" id="profile-wins">0</span>
                    <span class="stat-label">Victoires</span>
                </div>
                <div class="profile-stat">
                    <span class="stat-value" id="profile-winrate">0%</span>
                    <span class="stat-label">Win Rate</span>
                </div>
                <div class="profile-stat">
                    <span class="stat-value" id="profile-best-streak">0</span>
                    <span class="stat-label">Meilleure s√©rie</span>
                </div>
            </div>
            <div class="profile-badges">
                <h3>üèÖ Badges d√©bloqu√©s</h3>
                <div class="badges-grid" id="profile-badges">
                    <div class="badge locked">üîí</div>
                    <div class="badge locked">üîí</div>
                    <div class="badge locked">üîí</div>
                    <div class="badge locked">üîí</div>
                    <div class="badge locked">üîí</div>
                    <div class="badge locked">üîí</div>
                </div>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div class="modal hidden" id="history-modal">
        <div class="modal-overlay"></div>
        <div class="modal-box modal-lg">
            <button class="modal-close" id="close-history">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            <h3>üìú Historique des parties</h3>
            <div class="history-filters">
                <button class="filter-btn active" data-filter="all">Toutes</button>
                <button class="filter-btn" data-filter="solo">Solo</button>
                <button class="filter-btn" data-filter="multi">Multi</button>
            </div>
            <div class="history-list" id="history-list">
                <p class="history-empty">Aucune partie jou√©e</p>
            </div>
        </div>
    </div>

    <!-- Themes Shop Modal -->
    <div class="modal hidden" id="themes-modal">
        <div class="modal-overlay"></div>
        <div class="modal-box modal-lg">
            <button class="modal-close" id="close-themes">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            <h3>üé® Boutique de Th√®mes</h3>
            <p class="themes-balance">Tes points: <span id="themes-balance">0</span> pts</p>
            <div class="themes-grid" id="themes-grid">
                <div class="theme-card owned" data-theme="default">
                    <div class="theme-preview default-preview"></div>
                    <h4>Nature</h4>
                    <p>Th√®me par d√©faut</p>
                    <button class="btn-theme equipped">√âquip√©</button>
                </div>
                <div class="theme-card" data-theme="neon">
                    <div class="theme-preview neon-preview"></div>
                    <h4>N√©on</h4>
                    <p>500 pts ou Niveau 5</p>
                    <button class="btn-theme" onclick="unlockTheme('neon')">D√©bloquer</button>
                </div>
                <div class="theme-card" data-theme="galaxy">
                    <div class="theme-preview galaxy-preview"></div>
                    <h4>Galaxie</h4>
                    <p>1000 pts ou Niveau 10</p>
                    <button class="btn-theme" onclick="unlockTheme('galaxy')">D√©bloquer</button>
                </div>
                <div class="theme-card" data-theme="sunset">
                    <div class="theme-preview sunset-preview"></div>
                    <h4>Coucher de soleil</h4>
                    <p>1500 pts ou Niveau 15</p>
                    <button class="btn-theme" onclick="unlockTheme('sunset')">D√©bloquer</button>
                </div>
                <div class="theme-card" data-theme="ocean">
                    <div class="theme-preview ocean-preview"></div>
                    <h4>Oc√©an</h4>
                    <p>2000 pts ou Niveau 20</p>
                    <button class="btn-theme" onclick="unlockTheme('ocean')">D√©bloquer</button>
                </div>
                <div class="theme-card" data-theme="fire">
                    <div class="theme-preview fire-preview"></div>
                    <h4>Feu</h4>
                    <p>3000 pts ou Niveau 25</p>
                    <button class="btn-theme" onclick="unlockTheme('fire')">D√©bloquer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tournaments Modal -->
    <div class="modal hidden" id="tournaments-modal">
        <div class="modal-overlay"></div>
        <div class="modal-box modal-xl">
            <button class="modal-close" id="close-tournaments">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            <h3>üèÜ Tournois</h3>
            <div class="tournaments-tabs">
                <button class="tournament-tab active" data-tab="live">üî¥ En cours</button>
                <button class="tournament-tab" data-tab="upcoming">‚è∞ √Ä venir</button>
                <button class="tournament-tab" data-tab="my">üìã Mes tournois</button>
            </div>
            <div class="tournaments-list" id="tournaments-list">
                <!-- Tournaments will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Spectator Modal -->
    <div class="modal hidden" id="spectator-modal">
        <div class="modal-overlay"></div>
        <div class="modal-box modal-xl">
            <button class="modal-close" id="close-spectator">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
            <div class="spectator-header">
                <span class="spectator-badge">üëÅÔ∏è MODE SPECTATEUR</span>
                <span class="spectator-viewers" id="spectator-viewers">0 spectateurs</span>
            </div>
            <div class="spectator-game" id="spectator-game">
                <!-- Game view will be rendered here -->
            </div>
            <div class="spectator-players" id="spectator-players">
                <!-- Players list -->
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app">
        <!-- Navigation Header -->
        <header class="nav-header" id="nav-header">
            <a href="#" class="nav-logo" onclick="goHome(); return false;">
                <span class="logo-vk">VK</span><span class="logo-games">GAMES</span><span class="logo-fr">.FR</span>
            </a>
            <nav class="nav-right">
                <div class="volume-control" id="volume-control">
                    <button class="volume-btn" id="volume-btn" title="Son">
                        <span class="vol-emoji" id="vol-emoji">üîä</span>
                    </button>
                    <div class="volume-slider-wrap">
                        <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="30">
                        <span class="volume-value" id="volume-value">30%</span>
                    </div>
                </div>
                <!-- Guest view -->
                <button class="nav-btn btn-login" id="btn-login">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="8" r="4"/>
                        <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
                    </svg>
                    <span>Connexion</span>
                </button>
                <!-- Logged in view -->
                <div class="user-menu hidden" id="user-menu">
                    <button class="user-menu-btn" id="user-menu-btn">
                        <div class="user-avatar" id="nav-avatar">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="12" cy="8" r="4"/>
                                <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
                            </svg>
                        </div>
                        <span class="user-name" id="nav-username">Joueur</span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"/>
                        </svg>
                    </button>
                    <div class="user-dropdown" id="user-dropdown">
                        <div class="dropdown-header">
                            <div class="dropdown-rank" id="dropdown-rank">
                                <span class="rank-icon">ü•â</span>
                                <span class="rank-name">Bronze</span>
                            </div>
                            <div class="dropdown-level">
                                <span class="level-badge" id="dropdown-level">Niv. 1</span>
                                <span class="dropdown-score" id="dropdown-score">0 pts</span>
                            </div>
                            <div class="dropdown-xp">
                                <div class="xp-bar">
                                    <div class="xp-fill" id="dropdown-xp-fill" style="width: 0%"></div>
                                </div>
                                <span class="xp-text" id="dropdown-xp-text">0 / 100 XP</span>
                            </div>
                        </div>
                        <button class="dropdown-item" id="btn-profile">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="8" r="4"/>
                                <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
                            </svg>
                            Mon Profil
                        </button>
                        <button class="dropdown-item" id="btn-history">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            Historique
                        </button>
                        <button class="dropdown-item" id="btn-themes-shop">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="5"/>
                                <line x1="12" y1="1" x2="12" y2="3"/>
                                <line x1="12" y1="21" x2="12" y2="23"/>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                                <line x1="1" y1="12" x2="3" y2="12"/>
                                <line x1="21" y1="12" x2="23" y2="12"/>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                            </svg>
                            Boutique Th√®mes
                        </button>
                        <button class="dropdown-item" id="btn-settings">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                            </svg>
                            Param√®tres
                        </button>
                        <button class="dropdown-item" id="btn-admin">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0110 0v4"/>
                            </svg>
                            Admin
                        </button>
                        <button class="dropdown-item dropdown-logout" id="btn-logout">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
                                <polyline points="16 17 21 12 16 7"/>
                                <line x1="21" y1="12" x2="9" y2="12"/>
                            </svg>
                            D√©connexion
                        </button>
                    </div>
                </div>
            </nav>
        </header>

        <!-- Home Screen -->
        <section id="home-screen" class="screen active">
            <div class="home-container">
                <!-- Hero Section -->
                <div class="hero">
                    <div class="hero-glow"></div>
                    <h1 class="hero-title">
                        <span class="hero-vk">VK</span>GAMES<span class="hero-fr">.FR</span>
                    </h1>
                    <p class="hero-subtitle">Teste tes connaissances, d√©fie tes amis</p>
                    <p class="hero-cta" id="hero-cta">
                        <span class="cta-icon">üéÆ</span>
                        <span>Inscris-toi pour sauvegarder tes stats et d√©fier tes amis !</span>
                    </p>
                    <div class="hero-stats">
                        <div class="hero-stat">
                            <span class="stat-number" id="stat-players">0</span>
                            <span class="stat-text">Inscrits</span>
                        </div>
                        <div class="hero-stat">
                            <span class="stat-number" id="stat-games">5</span>
                            <span class="stat-text">Cat√©gories</span>
                        </div>
                        <div class="hero-stat">
                            <span class="stat-number" id="stat-questions">500+</span>
                            <span class="stat-text">Questions</span>
                        </div>
                    </div>
                </div>

                <!-- Multiplayer Section -->
                <div class="multiplayer-section">
                    <div class="mp-banner">
                        <div class="mp-banner-content">
                            <div class="mp-banner-icon">üë•</div>
                            <div class="mp-banner-text">
                                <h3>Mode Multijoueur</h3>
                                <p>D√©fie tes amis en temps r√©el !</p>
                            </div>
                        </div>
                        <div class="mp-banner-actions">
                            <button class="btn-primary" id="create-multiplayer">üéÆ Cr√©er une partie</button>
                            <button class="btn-secondary" id="join-multiplayer">üîó Rejoindre</button>
                        </div>
                    </div>

                    <!-- Public Games on Home -->
                    <div class="home-public-games">
                        <div class="public-games-header">
                            <h3>üåê Parties en cours</h3>
                            <button class="refresh-btn" id="refresh-home-games" title="Rafra√Æchir">üîÑ</button>
                        </div>
                        <div class="public-games-list" id="home-public-games-list">
                            <p class="no-games">Chargement...</p>
                        </div>
                    </div>
                </div>

                <!-- Games Section -->
                <div class="games-section">
                    <div class="games-header">
                        <h2>Choisis ton jeu (Solo)</h2>
                        <div class="games-filter">
                            <button class="filter-btn active" data-filter="all">Tous</button>
                            <button class="filter-btn" data-filter="available">Disponibles</button>
                        </div>
                    </div>

                    <div class="games-grid-full">
                        <!-- Music Quiz -->
                        <div class="game-card-large" data-game="music">
                            <div class="card-bg music-bg"></div>
                            <div class="card-content">
                                <div class="card-badge">POPULAIRE</div>
                                <div class="card-icon">üéµ</div>
                                <h3>Quiz Musical</h3>
                                <p>Devine les artistes et les chansons</p>
                                <div class="card-modes">
                                    <span>üéØ Quiz</span>
                                    <span>üéß Blind Test</span>
                                    <span>üìä Higher/Lower</span>
                                </div>
                            </div>
                        </div>

                        <!-- Cinema Quiz -->
                        <div class="game-card-large" data-game="cinema">
                            <div class="card-bg cinema-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">üé¨</div>
                                <h3>Quiz Cin√©ma</h3>
                                <p>Films, acteurs et r√©pliques cultes</p>
                                <div class="card-modes">
                                    <span>üéØ Quiz</span>
                                    <span>üé≠ R√©pliques</span>
                                    <span>üìä Box Office</span>
                                </div>
                            </div>
                        </div>

                        <!-- Sport Quiz -->
                        <div class="game-card-large" data-game="sport">
                            <div class="card-bg sport-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">‚öΩ</div>
                                <h3>Quiz Sport</h3>
                                <p>Football, basket et l√©gendes du sport</p>
                                <div class="card-modes">
                                    <span>üéØ Quiz</span>
                                    <span>üèÜ Palmar√®s</span>
                                    <span>üìä Stats</span>
                                </div>
                            </div>
                        </div>

                        <!-- Gaming Quiz -->
                        <div class="game-card-large" data-game="gaming">
                            <div class="card-bg gaming-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">üéÆ</div>
                                <h3>Quiz Gaming</h3>
                                <p>Jeux vid√©o, studios et esport</p>
                                <div class="card-modes">
                                    <span>üéØ Quiz</span>
                                    <span>üïπÔ∏è Retro</span>
                                    <span>üìä Ventes</span>
                                </div>
                            </div>
                        </div>

                        <!-- Geo Quiz -->
                        <div class="game-card-large" data-game="geo">
                            <div class="card-bg geo-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">üåç</div>
                                <h3>Quiz G√©o</h3>
                                <p>Pays, capitales et drapeaux</p>
                                <div class="card-modes">
                                    <span>üéØ Quiz</span>
                                    <span>üö© Drapeaux</span>
                                    <span>üìä Population</span>
                                </div>
                            </div>
                        </div>

                        <!-- Blind Test Audio -->
                        <div class="game-card-large" data-game="blindtest">
                            <div class="card-bg blindtest-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">üîä</div>
                                <h3>Blind Test</h3>
                                <p>Reconnais les sons et musiques de jeux</p>
                                <div class="card-modes">
                                    <span>üî´ Sons</span>
                                    <span>üéµ OST</span>
                                    <span>üéÆ Mix</span>
                                </div>
                            </div>
                        </div>

                        <!-- Screenshot Quiz -->
                        <div class="game-card-large" data-game="screenshot">
                            <div class="card-bg screenshot-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">üì∏</div>
                                <h3>Screenshot Quiz</h3>
                                <p>Devine le jeu √† partir d'une image</p>
                                <div class="card-modes">
                                    <span>üéØ Classic</span>
                                    <span>üîç Zoom</span>
                                    <span>üéÆ Mix</span>
                                </div>
                            </div>
                        </div>

                        <!-- Logo Quiz -->
                        <div class="game-card-large" data-game="logo">
                            <div class="card-bg logo-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">üè∑Ô∏è</div>
                                <h3>Logo Quiz</h3>
                                <p>Reconnais les logos de jeux et studios</p>
                                <div class="card-modes">
                                    <span>üéÆ Jeux</span>
                                    <span>üè¢ Studios</span>
                                    <span>üé≤ Mix</span>
                                </div>
                            </div>
                        </div>

                        <!-- Fake or Real -->
                        <div class="game-card-large" data-game="fakereal">
                            <div class="card-bg fakereal-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">ü§ñ</div>
                                <h3>Fake or Real</h3>
                                <p>IA ou r√©alit√© ? Sauras-tu faire la diff√©rence ?</p>
                                <div class="card-modes">
                                    <span>üñºÔ∏è Images</span>
                                    <span>üì∞ Faits</span>
                                </div>
                            </div>
                        </div>

                        <!-- Face Merge - D√©sactiv√© (n√©cessite des images de visages fusionn√©s) -->
                        <!-- <div class="game-card-large" data-game="facemerge">
                            <div class="card-bg facemerge-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">üë•</div>
                                <h3>Face Merge</h3>
                                <p>Devine les 2 c√©l√©brit√©s m√©lang√©es</p>
                                <div class="card-modes">
                                    <span>üé¨ Acteurs</span>
                                    <span>üé§ Chanteurs</span>
                                </div>
                            </div>
                        </div> -->

                        <!-- Zoom Race -->
                        <div class="game-card-large" data-game="zoomrace">
                            <div class="card-bg zoomrace-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">üîç</div>
                                <h3>Zoom Race</h3>
                                <p>Image zoom√©e qui se r√©v√®le, devine vite !</p>
                                <div class="card-modes">
                                    <span>üéÆ Jeux</span>
                                    <span>üé¨ Films</span>
                                    <span>üè∑Ô∏è Logos</span>
                                </div>
                            </div>
                        </div>

                        <!-- Memory Sequence -->
                        <div class="game-card-large" data-game="memory">
                            <div class="card-bg memory-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">üß†</div>
                                <h3>Memory</h3>
                                <p>M√©morise et reproduis la s√©quence</p>
                                <div class="card-modes">
                                    <span>üé® Couleurs</span>
                                    <span>üîä Sons</span>
                                </div>
                            </div>
                        </div>

                        <!-- Category Sprint -->
                        <div class="game-card-large" data-game="categorysprint">
                            <div class="card-bg sprint-bg"></div>
                            <div class="card-content">
                                <div class="card-badge new-badge">NOUVEAU</div>
                                <div class="card-icon">‚ö°</div>
                                <h3>Category Sprint</h3>
                                <p>30 secondes pour donner un max de r√©ponses</p>
                                <div class="card-modes">
                                    <span>üé¨ Films</span>
                                    <span>üéµ Musique</span>
                                    <span>üåç G√©o</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Daily Challenges Section -->
                <div class="challenges-section" id="challenges-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="title-icon">üéØ</span>
                            D√©fis du jour
                            <span class="challenges-timer" id="challenges-timer">Renouvellement dans 12h</span>
                        </h2>
                    </div>
                    <div class="challenges-grid" id="challenges-grid">
                        <div class="challenge-card" data-challenge="1">
                            <div class="challenge-icon">üéµ</div>
                            <div class="challenge-info">
                                <h4>M√©lomane</h4>
                                <p>Gagne 3 parties de Quiz Musical</p>
                                <div class="challenge-progress">
                                    <div class="challenge-bar"><div class="challenge-fill" style="width: 0%"></div></div>
                                    <span>0/3</span>
                                </div>
                            </div>
                            <div class="challenge-reward">
                                <span class="reward-xp">+150 XP</span>
                            </div>
                        </div>
                        <div class="challenge-card" data-challenge="2">
                            <div class="challenge-icon">üî•</div>
                            <div class="challenge-info">
                                <h4>En feu</h4>
                                <p>Fais une s√©rie de 10 bonnes r√©ponses</p>
                                <div class="challenge-progress">
                                    <div class="challenge-bar"><div class="challenge-fill" style="width: 0%"></div></div>
                                    <span>0/10</span>
                                </div>
                            </div>
                            <div class="challenge-reward">
                                <span class="reward-xp">+100 XP</span>
                            </div>
                        </div>
                        <div class="challenge-card" data-challenge="3">
                            <div class="challenge-icon">‚öîÔ∏è</div>
                            <div class="challenge-info">
                                <h4>Challenger</h4>
                                <p>Joue 5 parties multijoueur</p>
                                <div class="challenge-progress">
                                    <div class="challenge-bar"><div class="challenge-fill" style="width: 0%"></div></div>
                                    <span>0/5</span>
                                </div>
                            </div>
                            <div class="challenge-reward">
                                <span class="reward-xp">+200 XP</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tournaments Section -->
                <div class="tournaments-section" id="tournaments-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="title-icon">üèÜ</span>
                            Tournois
                        </h2>
                        <button class="btn-text" id="view-tournaments">
                            Voir tout
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                    <div class="tournaments-grid" id="tournaments-grid">
                        <div class="tournament-card live">
                            <div class="tournament-status">üî¥ EN COURS</div>
                            <div class="tournament-icon">üéµ</div>
                            <h4>Tournoi Musical</h4>
                            <p>32 participants</p>
                            <div class="tournament-time">Termine dans 45min</div>
                            <button class="btn-tournament spectate" onclick="spectateTournament('music-1')">üëÅÔ∏è Regarder</button>
                        </div>
                        <div class="tournament-card upcoming">
                            <div class="tournament-status">‚è∞ BIENT√îT</div>
                            <div class="tournament-icon">üé¨</div>
                            <h4>Tournoi Cin√©ma</h4>
                            <p>12/32 inscrits</p>
                            <div class="tournament-time">Dans 2h30</div>
                            <button class="btn-tournament join" onclick="joinTournament('cinema-1')">S'inscrire</button>
                        </div>
                        <div class="tournament-card upcoming">
                            <div class="tournament-status">‚è∞ BIENT√îT</div>
                            <div class="tournament-icon">‚öΩ</div>
                            <h4>Tournoi Sport</h4>
                            <p>8/32 inscrits</p>
                            <div class="tournament-time">Dans 5h</div>
                            <button class="btn-tournament join" onclick="joinTournament('sport-1')">S'inscrire</button>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard Preview -->
                <div class="leaderboard-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="title-icon">üèÜ</span>
                            Classement
                        </h2>
                        <button class="btn-text" id="view-leaderboard">
                            Voir tout
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                    <div class="leaderboard-card">
                        <div class="leaderboard-list" id="leaderboard-preview">
                            <div class="leaderboard-empty">Aucun score pour le moment</div>
                        </div>
                    </div>
                </div>

                <!-- Social Links & Report -->
                <div class="footer-section">
                    <div class="social-links" id="social-links">
                        <a href="#" class="social-btn" id="social-x" target="_blank" title="X (Twitter)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-btn" id="social-instagram" target="_blank" title="Instagram">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
                                <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/>
                                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
                            </svg>
                        </a>
                        <a href="#" class="social-btn" id="social-tiktok" target="_blank" title="TikTok">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-btn" id="social-discord" target="_blank" title="Discord">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994.021-.041.001-.09-.041-.106a13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                            </svg>
                        </a>
                    </div>
                    <button class="report-btn" id="report-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
                            <line x1="12" y1="9" x2="12" y2="13"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                        Signaler un probl√®me
                    </button>
                </div>
            </div>
        </section>

        <!-- Game Menu (Generic for all categories) -->
        <section id="game-menu" class="screen">
            <div class="menu-container">
                <button class="back-btn" id="back-home">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Retour
                </button>

                <div class="menu-header">
                    <div class="menu-icon" id="menu-icon">üéµ</div>
                    <h1 class="menu-title" id="menu-title">Quiz Musical</h1>
                </div>

                <!-- Mode Selection -->
                <div class="selection-section">
                    <h3 class="selection-title">Mode de jeu</h3>
                    <div class="mode-grid" id="mode-grid">
                        <!-- Modes will be inserted dynamically -->
                    </div>
                </div>

                <!-- Genre/Category Selection -->
                <div class="selection-section hidden" id="genre-section">
                    <h3 class="selection-title" id="genre-title">Genre</h3>
                    <div class="genre-grid" id="genre-grid">
                        <!-- Genres will be inserted dynamically -->
                    </div>
                </div>

                <!-- Difficulty Selection -->
                <div class="selection-section hidden" id="diff-section">
                    <h3 class="selection-title">Difficult√©</h3>
                    <div class="diff-grid">
                        <button class="diff-btn" data-diff="easy">
                            <span class="diff-emoji">üòä</span>
                            <span class="diff-name">Facile</span>
                            <span class="diff-time">30s</span>
                        </button>
                        <button class="diff-btn" data-diff="medium">
                            <span class="diff-emoji">üî•</span>
                            <span class="diff-name">Normal</span>
                            <span class="diff-time">20s</span>
                        </button>
                        <button class="diff-btn" data-diff="hard">
                            <span class="diff-emoji">üíÄ</span>
                            <span class="diff-name">Expert</span>
                            <span class="diff-time">15s</span>
                        </button>
                    </div>
                </div>

                <!-- Play Button -->
                <button class="play-btn hidden" id="play-btn">
                    <span>Lancer la partie</span>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                </button>
            </div>
        </section>

        <!-- Game Screen (Quiz) -->
        <section id="game-screen" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <button class="quit-btn" id="quit-game">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="game-stats">
                        <div class="stat-box">
                            <span class="stat-value" id="game-score">0</span>
                            <span class="stat-label">Score</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value" id="game-progress">1/10</span>
                            <span class="stat-label">Question</span>
                        </div>
                        <div class="stat-box stat-timer" id="timer-box">
                            <span class="stat-value" id="game-timer">30</span>
                            <span class="stat-label">Temps</span>
                        </div>
                    </div>
                </div>

                <div class="timer-bar">
                    <div class="timer-fill" id="timer-fill"></div>
                </div>

                <!-- Music Player (for blind test) -->
                <div class="music-player hidden" id="music-player">
                    <div class="player-visual">
                        <div class="player-disc">
                            <div class="disc-inner">üéµ</div>
                        </div>
                        <div class="player-waves">
                            <span></span><span></span><span></span><span></span><span></span>
                        </div>
                    </div>
                    <p class="player-hint">√âcoute et devine...</p>
                </div>

                <div class="question-box" id="question-box">
                    <p class="question-hint" id="question-hint"></p>
                    <h2 class="question-text" id="question-text"></h2>
                </div>

                <div class="answers-grid" id="answers-grid"></div>
            </div>
        </section>

        <!-- Higher/Lower Screen -->
        <section id="hl-screen" class="screen">
            <div class="hl-container">
                <div class="game-header">
                    <button class="quit-btn" id="quit-hl">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="game-stats">
                        <div class="stat-box">
                            <span class="stat-value" id="hl-score">0</span>
                            <span class="stat-label">Score</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value" id="hl-streak">0</span>
                            <span class="stat-label">S√©rie</span>
                        </div>
                        <div class="stat-box stat-best">
                            <span class="stat-value" id="hl-best">0</span>
                            <span class="stat-label">Record</span>
                        </div>
                    </div>
                </div>

                <h2 class="hl-question" id="hl-question">Qui a le plus de streams ?</h2>

                <div class="hl-cards">
                    <div class="hl-card" id="hl-left">
                        <div class="hl-emoji" id="hl-left-emoji"></div>
                        <h3 class="hl-title"></h3>
                        <p class="hl-artist"></p>
                        <div class="hl-streams">
                            <span class="streams-num"></span>
                            <span class="streams-label" id="hl-left-label">millions de streams</span>
                        </div>
                    </div>

                    <div class="hl-vs">VS</div>

                    <div class="hl-card" id="hl-right">
                        <div class="hl-emoji" id="hl-right-emoji"></div>
                        <h3 class="hl-title"></h3>
                        <p class="hl-artist"></p>
                        <div class="hl-choice">
                            <button class="hl-btn hl-higher" id="btn-higher">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4l8 8H4z"/></svg>
                                Plus
                            </button>
                            <button class="hl-btn hl-lower" id="btn-lower">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 20l-8-8h16z"/></svg>
                                Moins
                            </button>
                        </div>
                        <div class="hl-streams hl-hidden">
                            <span class="streams-num"></span>
                            <span class="streams-label" id="hl-right-label">millions de streams</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Clash Screen -->
        <section id="clash-screen" class="screen">
            <div class="clash-container">
                <div class="game-header">
                    <button class="quit-btn" id="quit-clash">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="game-stats">
                        <div class="stat-box">
                            <span class="stat-value" id="clash-round">1/4</span>
                            <span class="stat-label">Round</span>
                        </div>
                    </div>
                </div>

                <h2 class="clash-question" id="clash-question">Qui pr√©f√®res-tu ?</h2>

                <div class="clash-cards">
                    <div class="clash-card" id="clash-left">
                        <div class="clash-emoji"></div>
                        <h3 class="clash-name"></h3>
                        <p class="clash-genre"></p>
                        <div class="clash-votes hidden">
                            <div class="votes-bar"><div class="votes-fill"></div></div>
                            <span class="votes-pct"></span>
                        </div>
                    </div>

                    <div class="clash-vs">VS</div>

                    <div class="clash-card" id="clash-right">
                        <div class="clash-emoji"></div>
                        <h3 class="clash-name"></h3>
                        <p class="clash-genre"></p>
                        <div class="clash-votes hidden">
                            <div class="votes-bar"><div class="votes-fill"></div></div>
                            <span class="votes-pct"></span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Result Screen -->
        <section id="result-screen" class="screen">
            <div class="result-container">
                <div class="result-card">
                    <div class="result-icon" id="result-icon">üéâ</div>
                    <h2 class="result-title" id="result-title">Bien jou√© !</h2>
                    <div class="result-score">
                        <span class="score-num" id="final-score">0</span>
                        <span class="score-label">points</span>
                    </div>
                    <div class="result-stats">
                        <div class="result-stat">
                            <span class="rs-value" id="result-correct">0</span>
                            <span class="rs-label">Bonnes r√©ponses</span>
                        </div>
                        <div class="result-stat">
                            <span class="rs-value" id="result-accuracy">0%</span>
                            <span class="rs-label">Pr√©cision</span>
                        </div>
                        <div class="result-stat">
                            <span class="rs-value" id="result-streak">0</span>
                            <span class="rs-label">Meilleure s√©rie</span>
                        </div>
                    </div>
                    <div class="result-actions">
                        <button class="btn-primary" id="retry-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 4v6h6M23 20v-6h-6"/>
                                <path d="M20.49 9A9 9 0 005.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 013.51 15"/>
                            </svg>
                            Rejouer
                        </button>
                        <button class="btn-secondary" id="home-btn">Menu</button>
                        <button class="btn-ghost" id="share-btn">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/>
                                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                            </svg>
                            Partager
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- City Guesser Screen -->
        <section id="cityguesser-screen" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <button class="back-btn" onclick="quitGame()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    </button>
                    <div class="game-info">
                        <span class="game-score">Score: <span id="cg-score">0</span></span>
                        <span class="game-progress" id="cg-progress">1/10</span>
                    </div>
                </div>
                <div class="cityguesser-content">
                    <div class="city-image-container">
                        <img id="city-image" src="" alt="Ville √† deviner" class="city-image">
                    </div>
                    <p class="cg-instruction">Clique sur la carte pour placer ta r√©ponse</p>
                    <div id="city-map" class="city-map"></div>
                    <button class="btn-primary cg-confirm" id="cg-confirm-btn" disabled onclick="confirmCityGuess()">Confirmer</button>
                </div>
            </div>
        </section>

        <!-- Fake or Real Screen -->
        <section id="fakereal-screen" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <button class="back-btn" onclick="quitGame()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    </button>
                    <div class="game-info">
                        <span class="game-score">Score: <span id="fr-score">0</span></span>
                        <span class="game-progress" id="fr-progress">1/10</span>
                    </div>
                </div>
                <div class="fakereal-content">
                    <div class="fr-media-container">
                        <img id="fr-image" src="" alt="" class="fr-image hidden">
                        <p id="fr-fact" class="fr-fact hidden"></p>
                    </div>
                    <div class="fr-buttons">
                        <button class="fr-btn fr-real" onclick="answerFakeReal(true)">
                            <span class="fr-icon">‚úì</span>
                            <span>VRAI</span>
                        </button>
                        <button class="fr-btn fr-fake" onclick="answerFakeReal(false)">
                            <span class="fr-icon">‚úó</span>
                            <span>FAUX</span>
                        </button>
                    </div>
                    <div id="fr-result" class="fr-result hidden"></div>
                </div>
            </div>
        </section>

        <!-- Face Merge Screen -->
        <section id="facemerge-screen" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <button class="back-btn" onclick="quitGame()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    </button>
                    <div class="game-info">
                        <span class="game-score">Score: <span id="fm-score">0</span></span>
                        <span class="game-progress" id="fm-progress">1/10</span>
                    </div>
                </div>
                <div class="facemerge-content">
                    <p class="fm-question">Qui sont ces deux personnes fusionn√©es ?</p>
                    <div class="fm-image-container">
                        <img id="fm-image" src="" alt="Visage fusionn√©" class="fm-image">
                    </div>
                    <div id="fm-answers" class="fm-answers"></div>
                </div>
            </div>
        </section>

        <!-- Zoom Race Screen -->
        <section id="zoomrace-screen" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <button class="back-btn" onclick="quitGame()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    </button>
                    <div class="game-info">
                        <span class="game-score">Score: <span id="zr-score">0</span></span>
                        <span class="game-progress" id="zr-progress">1/10</span>
                    </div>
                </div>
                <div class="zoomrace-content">
                    <div class="zr-timer-bar">
                        <div class="zr-timer-fill" id="zr-timer-fill"></div>
                    </div>
                    <div class="zr-image-container">
                        <img id="zr-image" src="" alt="" class="zr-image">
                    </div>
                    <div id="zr-answers" class="answers-grid"></div>
                </div>
            </div>
        </section>

        <!-- Memory Screen -->
        <section id="memory-screen" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <button class="back-btn" onclick="quitGame()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    </button>
                    <div class="game-info">
                        <span class="game-score">Niveau: <span id="mem-level">1</span></span>
                        <span class="game-score">Score: <span id="mem-score">0</span></span>
                    </div>
                </div>
                <div class="memory-content">
                    <p class="memory-instruction" id="mem-instruction">Regarde la s√©quence...</p>
                    <div class="memory-grid" id="memory-grid">
                        <button class="memory-btn" data-color="red" style="background: #ef4444;"></button>
                        <button class="memory-btn" data-color="blue" style="background: #3b82f6;"></button>
                        <button class="memory-btn" data-color="green" style="background: #22c55e;"></button>
                        <button class="memory-btn" data-color="yellow" style="background: #eab308;"></button>
                    </div>
                    <div class="memory-buttons">
                        <button class="btn-primary" id="mem-start-btn">Commencer</button>
                        <button class="btn-secondary hidden" id="mem-quit-btn" onclick="quitMemory()">Quitter</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Category Sprint Screen -->
        <section id="sprint-screen" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <button class="back-btn" onclick="quitGame()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    </button>
                    <div class="game-info">
                        <span class="game-score">Score: <span id="sprint-score">0</span></span>
                        <span class="sprint-timer" id="sprint-timer">30</span>
                    </div>
                </div>
                <div class="sprint-content">
                    <h2 class="sprint-category" id="sprint-category">Cat√©gorie</h2>
                    <div class="sprint-input-container">
                        <input type="text" id="sprint-input" class="sprint-input" placeholder="Tape ta r√©ponse..." autocomplete="off">
                        <button class="btn-primary sprint-submit" id="sprint-submit">OK</button>
                    </div>
                    <div class="sprint-answers" id="sprint-answers"></div>
                </div>
            </div>
        </section>

        <!-- Winner Screen (Clash) -->
        <section id="winner-screen" class="screen">
            <div class="result-container">
                <div class="result-card winner-card">
                    <div class="winner-crown">üëë</div>
                    <h2 class="winner-title">Le gagnant est...</h2>
                    <div class="winner-display">
                        <div class="winner-emoji" id="winner-emoji"></div>
                        <h3 class="winner-name" id="winner-name"></h3>
                    </div>
                    <div class="result-actions">
                        <button class="btn-primary" id="clash-retry">Nouveau tournoi</button>
                        <button class="btn-secondary" id="clash-home">Menu</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Leaderboard Screen -->
        <section id="leaderboard-screen" class="screen">
            <div class="leaderboard-container">
                <button class="back-btn" id="back-leaderboard">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Retour
                </button>
                <div class="leaderboard-header">
                    <h1>üèÜ Classement</h1>
                    <p class="leaderboard-subtitle">Top joueurs de la semaine</p>
                </div>
                <div class="rewards-preview" id="rewards-preview"></div>
                <div class="leaderboard-full" id="leaderboard-full"></div>
            </div>
        </section>

        <!-- Settings Screen -->
        <section id="settings-screen" class="screen">
            <div class="settings-container">
                <button class="back-btn" id="back-settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Retour
                </button>

                <div class="settings-header">
                    <h1>Param√®tres du compte</h1>
                </div>

                <div class="settings-card">
                    <div class="settings-avatar">
                        <div class="avatar-large" id="settings-avatar">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="12" cy="8" r="4"/>
                                <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
                            </svg>
                        </div>
                        <div class="avatar-actions">
                            <label class="avatar-change">
                                <input type="file" id="settings-avatar-input" accept="image/*" hidden>
                                <span>üì∑ Changer</span>
                            </label>
                            <button type="button" class="avatar-remove" id="remove-avatar">üóëÔ∏è Supprimer</button>
                        </div>
                    </div>

                    <form id="settings-form">
                        <div class="form-group">
                            <label>Pseudo</label>
                            <input type="text" id="settings-username" placeholder="Ton pseudo" maxlength="20">
                            <p class="form-hint" id="username-hint">Modifiable une fois par semaine</p>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="settings-email" placeholder="ton@email.com">
                        </div>
                        <div class="form-group">
                            <label>Nouveau mot de passe</label>
                            <input type="password" id="settings-password" placeholder="Laisser vide pour ne pas changer" minlength="6">
                        </div>
                        <div class="form-group">
                            <label>Confirmer le mot de passe</label>
                            <input type="password" id="settings-password-confirm" placeholder="Confirmer le nouveau mot de passe">
                        </div>
                        <button type="submit" class="btn-primary btn-full">Sauvegarder</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Admin Panel -->
        <section id="admin-screen" class="screen">
            <div class="admin-container">
                <button class="back-btn" id="back-admin">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Retour
                </button>

                <div class="admin-header">
                    <h1>üîß Panel Admin</h1>
                </div>

                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="rewards">R√©compenses</button>
                    <button class="admin-tab" data-tab="theme">Th√®me</button>
                    <button class="admin-tab" data-tab="social">R√©seaux</button>
                    <button class="admin-tab" data-tab="reports">Signalements</button>
                    <button class="admin-tab" data-tab="config">Config</button>
                </div>

                <!-- Rewards Tab -->
                <div class="admin-panel" id="panel-rewards">
                    <h3>R√©compenses du classement</h3>
                    <p class="admin-desc">D√©finir les r√©compenses pour les 5 meilleurs joueurs</p>

                    <div class="rewards-editor">
                        <div class="reward-item">
                            <span class="reward-rank">ü•á 1er</span>
                            <input type="text" id="reward-1" placeholder="Ex: Carte cadeau 50‚Ç¨">
                        </div>
                        <div class="reward-item">
                            <span class="reward-rank">ü•à 2√®me</span>
                            <input type="text" id="reward-2" placeholder="Ex: Carte cadeau 25‚Ç¨">
                        </div>
                        <div class="reward-item">
                            <span class="reward-rank">ü•â 3√®me</span>
                            <input type="text" id="reward-3" placeholder="Ex: Carte cadeau 10‚Ç¨">
                        </div>
                        <div class="reward-item">
                            <span class="reward-rank">4√®me</span>
                            <input type="text" id="reward-4" placeholder="Ex: Badge exclusif">
                        </div>
                        <div class="reward-item">
                            <span class="reward-rank">5√®me</span>
                            <input type="text" id="reward-5" placeholder="Ex: Badge exclusif">
                        </div>
                    </div>
                    <button class="btn-primary" id="save-rewards">Sauvegarder les r√©compenses</button>
                </div>

                <!-- Theme Tab -->
                <div class="admin-panel hidden" id="panel-theme">
                    <h3>Th√®me du fond</h3>
                    <p class="admin-desc">Choisir l'ambiance visuelle du site</p>

                    <div class="theme-grid">
                        <button class="theme-card" data-theme="particles">
                            <div class="theme-preview theme-particles"></div>
                            <span>Particules</span>
                        </button>
                        <button class="theme-card" data-theme="gradient">
                            <div class="theme-preview theme-gradient"></div>
                            <span>Gradient</span>
                        </button>
                        <button class="theme-card" data-theme="matrix">
                            <div class="theme-preview theme-matrix"></div>
                            <span>Matrix</span>
                        </button>
                        <button class="theme-card" data-theme="stars">
                            <div class="theme-preview theme-stars"></div>
                            <span>√âtoiles</span>
                        </button>
                        <button class="theme-card" data-theme="waves">
                            <div class="theme-preview theme-waves"></div>
                            <span>Vagues</span>
                        </button>
                        <button class="theme-card" data-theme="minimal">
                            <div class="theme-preview theme-minimal"></div>
                            <span>Minimal</span>
                        </button>
                    </div>

                    <h3 style="margin-top: 2rem;">Couleur principale</h3>
                    <div class="color-grid">
                        <button class="color-btn" data-color="blue" style="--c: #3b82f6;"></button>
                        <button class="color-btn" data-color="purple" style="--c: #8b5cf6;"></button>
                        <button class="color-btn" data-color="pink" style="--c: #ec4899;"></button>
                        <button class="color-btn" data-color="green" style="--c: #22c55e;"></button>
                        <button class="color-btn" data-color="orange" style="--c: #f97316;"></button>
                        <button class="color-btn" data-color="red" style="--c: #ef4444;"></button>
                    </div>
                </div>

                <!-- Social Tab -->
                <div class="admin-panel hidden" id="panel-social">
                    <h3>R√©seaux sociaux</h3>
                    <p class="admin-desc">Configurez les liens vers vos r√©seaux sociaux</p>

                    <div class="social-config">
                        <div class="social-config-item">
                            <div class="social-config-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                </svg>
                            </div>
                            <input type="url" id="social-x-url" placeholder="https://x.com/votrecompte">
                        </div>
                        <div class="social-config-item">
                            <div class="social-config-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
                                    <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/>
                                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
                                </svg>
                            </div>
                            <input type="url" id="social-instagram-url" placeholder="https://instagram.com/votrecompte">
                        </div>
                        <div class="social-config-item">
                            <div class="social-config-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/>
                                </svg>
                            </div>
                            <input type="url" id="social-tiktok-url" placeholder="https://tiktok.com/@votrecompte">
                        </div>
                        <div class="social-config-item">
                            <div class="social-config-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994.021-.041.001-.09-.041-.106a13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                                </svg>
                            </div>
                            <input type="url" id="social-discord-url" placeholder="https://discord.gg/votreinvitation">
                        </div>
                    </div>
                    <button class="btn-primary" id="save-social">Sauvegarder les liens</button>
                </div>

                <!-- Reports Tab -->
                <div class="admin-panel hidden" id="panel-reports">
                    <h3>Signalements</h3>

                    <div class="reports-subtabs">
                        <button class="report-subtab active" data-subtab="bugs">Bugs & Suggestions</button>
                        <button class="report-subtab" data-subtab="players">Joueurs signal√©s</button>
                    </div>

                    <!-- Bug Reports Section -->
                    <div class="reports-section" id="section-bugs">
                        <p class="admin-desc">Probl√®mes signal√©s par les utilisateurs</p>
                        <div class="reports-list" id="reports-list">
                            <div class="reports-empty">Aucun signalement pour le moment</div>
                        </div>
                        <div class="reports-actions">
                            <button class="btn-danger btn-sm" id="clear-reports">Effacer tous les signalements</button>
                        </div>
                    </div>

                    <!-- Player Reports Section -->
                    <div class="reports-section hidden" id="section-players">
                        <p class="admin-desc">Joueurs signal√©s par la communaut√©</p>
                        <div class="reports-list" id="player-reports-list">
                            <div class="reports-empty">Aucun joueur signal√©</div>
                        </div>
                        <div class="reports-actions">
                            <button class="btn-secondary btn-sm" id="refresh-player-reports">Actualiser</button>
                            <button class="btn-danger btn-sm" id="clear-player-reports">Effacer tout</button>
                        </div>
                    </div>
                </div>

                <!-- Config Tab -->
                <div class="admin-panel hidden" id="panel-config">
                    <h3>Configuration g√©n√©rale</h3>

                    <div class="config-item">
                        <label>Mot de passe admin</label>
                        <input type="password" id="admin-password" placeholder="Nouveau mot de passe">
                        <button class="btn-secondary btn-sm" id="change-admin-pwd">Changer</button>
                    </div>

                    <div class="config-item">
                        <label>R√©initialiser le classement</label>
                        <p class="config-desc">Efface tous les scores. Action irr√©versible.</p>
                        <button class="btn-danger btn-sm" id="reset-leaderboard">R√©initialiser</button>
                    </div>

                    <div class="config-item">
                        <label>Exporter les donn√©es</label>
                        <p class="config-desc">T√©l√©charger toutes les donn√©es en JSON.</p>
                        <button class="btn-secondary btn-sm" id="export-data">Exporter</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Auth Modal -->
        <div class="modal hidden" id="auth-modal">
            <div class="modal-overlay"></div>
            <div class="modal-box">
                <button class="modal-close" id="close-auth">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>

                <!-- Login Tab -->
                <div class="auth-tab" id="login-tab">
                    <h2 class="modal-title">Connexion</h2>
                    <p class="auth-subtitle">Ravis de te revoir !</p>

                    <!-- Google Sign In -->
                    <button class="btn-google" id="google-login">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Continuer avec Google
                    </button>

                    <div class="auth-divider">
                        <span>ou</span>
                    </div>

                    <form id="login-form">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="login-email" placeholder="ton@email.com" required>
                        </div>
                        <div class="form-group">
                            <label>Mot de passe</label>
                            <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                        </div>
                        <button type="submit" class="btn-primary btn-full">Se connecter</button>
                    </form>
                    <div class="auth-switch">
                        Pas de compte ? <button id="show-register">Cr√©er un compte</button>
                    </div>
                </div>

                <!-- Register Tab -->
                <div class="auth-tab hidden" id="register-tab">
                    <h2 class="modal-title">Cr√©er un compte</h2>
                    <p class="auth-subtitle">Rejoins la communaut√© et sauvegarde tes stats !</p>

                    <!-- Google Sign In -->
                    <button class="btn-google" id="google-register">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        S'inscrire avec Google
                    </button>

                    <div class="auth-divider">
                        <span>ou</span>
                    </div>

                    <form id="register-form">
                        <div class="avatar-upload">
                            <div class="avatar-preview" id="avatar-preview">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <circle cx="12" cy="8" r="4"/>
                                    <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
                                </svg>
                            </div>
                            <label class="avatar-btn">
                                <input type="file" id="avatar-input" accept="image/*" hidden>
                                üì∑ Photo de profil
                            </label>
                        </div>
                        <div class="form-group">
                            <label>Pseudo</label>
                            <input type="text" id="register-username" placeholder="TonPseudo" maxlength="20" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="register-email" placeholder="ton@email.com" required>
                        </div>
                        <div class="form-group">
                            <label>Mot de passe</label>
                            <input type="password" id="register-password" placeholder="Min. 6 caract√®res" minlength="6" required>
                        </div>
                        <button type="submit" class="btn-primary btn-full">üöÄ Cr√©er mon compte</button>
                    </form>
                    <div class="auth-switch">
                        D√©j√† un compte ? <button id="show-login">Se connecter</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Auth Modal -->
        <div class="modal hidden" id="admin-auth-modal">
            <div class="modal-overlay"></div>
            <div class="modal-box modal-sm">
                <h3>Acc√®s Admin</h3>
                <p>Entrez le mot de passe administrateur</p>
                <form id="admin-auth-form">
                    <div class="form-group">
                        <input type="password" id="admin-pwd-input" placeholder="Mot de passe" required>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancel-admin">Annuler</button>
                        <button type="submit" class="btn-primary">Acceder</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Quit Modal -->
        <div class="modal hidden" id="quit-modal">
            <div class="modal-overlay"></div>
            <div class="modal-box modal-sm">
                <h3>Quitter la partie ?</h3>
                <p>Ta progression sera perdue.</p>
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancel-quit">Continuer</button>
                    <button class="btn-danger" id="confirm-quit">Quitter</button>
                </div>
            </div>
        </div>

        <!-- Multiplayer Setup Screen -->
        <section id="multiplayer-setup" class="screen">
            <div class="mp-container">
                <button class="back-btn" id="back-mp-setup">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Retour
                </button>

                <div class="mp-header">
                    <div class="mp-icon">üéÆ</div>
                    <h1>Multijoueur</h1>
                    <p class="mp-subtitle">Rejoins une partie ou cr√©e la tienne !</p>
                </div>

                <!-- Public Games Section -->
                <div class="mp-public-games" id="mp-public-games">
                    <div class="public-games-header">
                        <h3>üåê Parties publiques disponibles</h3>
                        <button class="refresh-btn" id="refresh-public-games" title="Rafra√Æchir">üîÑ</button>
                    </div>
                    <div class="public-games-list" id="public-games-list">
                        <p class="no-games">Chargement...</p>
                    </div>
                </div>

                <div class="mp-create-header">
                    <h3>‚ûï Cr√©er une nouvelle partie</h3>
                </div>

                <div class="mp-config">
                    <div class="mp-section">
                        <h3>üë• Nombre de joueurs</h3>
                        <div class="mp-players-grid">
                            <button class="mp-player-btn" data-players="2">2</button>
                            <button class="mp-player-btn selected" data-players="4">4</button>
                            <button class="mp-player-btn" data-players="6">6</button>
                            <button class="mp-player-btn" data-players="8">8</button>
                        </div>
                    </div>

                    <div class="mp-section">
                        <h3>üéØ Jeu</h3>
                        <div class="mp-game-grid" id="mp-game-grid">
                            <button class="mp-game-btn selected" data-game="music">üéµ Musique</button>
                            <button class="mp-game-btn" data-game="cinema">üé¨ Cin√©ma</button>
                            <button class="mp-game-btn" data-game="sport">‚öΩ Sport</button>
                            <button class="mp-game-btn" data-game="gaming">üéÆ Gaming</button>
                            <button class="mp-game-btn" data-game="geo">üåç G√©o</button>
                            <button class="mp-game-btn" data-game="blindtest">üîä Blind Test</button>
                            <button class="mp-game-btn" data-game="screenshot">üì∏ Screenshot</button>
                            <button class="mp-game-btn" data-game="logo">üè∑Ô∏è Logo</button>
                            <button class="mp-game-btn" data-game="fakereal">ü§î Vrai/Faux</button>
                            <button class="mp-game-btn" data-game="zoomrace">üîç Zoom Race</button>
                            <button class="mp-game-btn" data-game="categorysprint">‚ö° Category Sprint</button>
                        </div>
                    </div>

                    <div class="mp-section">
                        <h3>üìÅ Cat√©gorie</h3>
                        <div class="mp-category-grid" id="mp-category-grid">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>

                    <div class="mp-section">
                        <h3>‚è±Ô∏è Temps par question</h3>
                        <div class="mp-time-grid">
                            <button class="mp-time-btn" data-time="10">10s</button>
                            <button class="mp-time-btn" data-time="15">15s</button>
                            <button class="mp-time-btn selected" data-time="20">20s</button>
                            <button class="mp-time-btn" data-time="30">30s</button>
                        </div>
                    </div>

                    <div class="mp-section">
                        <h3>üî¢ Nombre de manches</h3>
                        <div class="mp-rounds-grid">
                            <button class="mp-rounds-btn" data-rounds="5">5</button>
                            <button class="mp-rounds-btn selected" data-rounds="10">10</button>
                            <button class="mp-rounds-btn" data-rounds="15">15</button>
                            <button class="mp-rounds-btn" data-rounds="20">20</button>
                        </div>
                    </div>

                    <div class="mp-section">
                        <h3>üéØ Mode de jeu</h3>
                        <div class="mp-mode-toggle">
                            <button class="mp-mode-btn selected" data-mode="solo">üë§ Solo</button>
                            <button class="mp-mode-btn" data-mode="duo">üë• Duo (2v2)</button>
                        </div>
                        <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
                            Solo : chacun pour soi. Duo : joue en √©quipe de 2.
                        </p>
                    </div>

                    <div class="mp-section">
                        <h3>üîí Visibilit√©</h3>
                        <div class="mp-visibility-toggle">
                            <button class="mp-visibility-btn selected" data-visibility="public">üåê Publique</button>
                            <button class="mp-visibility-btn" data-visibility="private">üîí Priv√©e</button>
                        </div>
                        <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
                            Publique : visible dans la liste des parties. Priv√©e : accessible uniquement par code.
                        </p>
                    </div>
                </div>

                <button class="btn-primary btn-full mp-create-btn" id="create-mp-game">
                    üöÄ Cr√©er la partie
                </button>
            </div>
        </section>

        <!-- Multiplayer Lobby Screen -->
        <section id="multiplayer-lobby" class="screen">
            <div class="lobby-container">
                <div class="lobby-header">
                    <h1>üéÆ Salle d'attente</h1>
                    <p class="lobby-subtitle">En attente des joueurs...</p>
                </div>

                <div class="lobby-code-section">
                    <p>Partage ce code avec tes amis :</p>
                    <div class="lobby-code" id="lobby-code">XXXX</div>
                    <div class="lobby-actions">
                        <button class="btn-secondary" id="copy-lobby-code">üìã Copier le code</button>
                        <button class="btn-secondary" id="share-lobby-link">üîó Partager le lien</button>
                    </div>
                </div>

                <div class="lobby-info">
                    <div class="lobby-info-item">
                        <span class="lobby-info-label">Jeu</span>
                        <span class="lobby-info-value" id="lobby-game">üéµ Musique</span>
                    </div>
                    <div class="lobby-info-item">
                        <span class="lobby-info-label">Cat√©gorie</span>
                        <span class="lobby-info-value" id="lobby-category">Mix</span>
                    </div>
                    <div class="lobby-info-item">
                        <span class="lobby-info-label">Temps</span>
                        <span class="lobby-info-value" id="lobby-time">20s</span>
                    </div>
                    <div class="lobby-info-item">
                        <span class="lobby-info-label">Manches</span>
                        <span class="lobby-info-value" id="lobby-rounds">10</span>
                    </div>
                </div>

                <div class="lobby-change-settings" id="lobby-change-settings" style="display: none;">
                    <button class="btn-secondary" id="change-lobby-settings">‚öôÔ∏è Modifier les param√®tres</button>
                </div>

                <div class="lobby-players">
                    <h3>Joueurs (<span id="lobby-player-count">1</span>/<span id="lobby-max-players">4</span>)</h3>
                    <div class="lobby-players-list" id="lobby-players-list">
                        <!-- Players will be inserted here -->
                    </div>
                </div>

                <div class="lobby-buttons">
                    <button class="btn-danger" id="leave-lobby">Quitter</button>
                    <button class="btn-primary" id="start-mp-game" disabled>‚ñ∂Ô∏è Lancer la partie</button>
                </div>
            </div>
        </section>

        <!-- Multiplayer Game Screen -->
        <section id="multiplayer-game" class="screen">
            <div class="mp-game-container">
                <div class="mp-game-header">
                    <div class="mp-round-info">
                        <span class="mp-round-label">Manche</span>
                        <span class="mp-round-value" id="mp-current-round">1/10</span>
                    </div>
                    <div class="mp-timer-circle" id="mp-timer-circle">
                        <span id="mp-timer">20</span>
                    </div>
                </div>

                <div class="mp-scoreboard-mini" id="mp-scoreboard-mini">
                    <!-- Mini scoreboard will be inserted here -->
                </div>

                <div class="mp-question-box" id="mp-question-box">
                    <p class="mp-question-text" id="mp-question-text"></p>
                </div>

                <div class="mp-answers-grid" id="mp-answers-grid">
                    <!-- Answers will be inserted here -->
                </div>

                <div class="mp-players-status" id="mp-players-status">
                    <!-- Player status will be inserted here -->
                </div>

                <div class="mp-feedback" id="mp-feedback">
                    <div class="mp-feedback-icon" id="mp-feedback-icon">‚úì</div>
                    <div class="mp-feedback-points" id="mp-feedback-points">+150</div>
                </div>

                <!-- In-Game Chat -->
                <div class="mp-chat" id="mp-chat">
                    <button class="chat-toggle" id="chat-toggle">
                        üí¨ <span class="chat-badge hidden" id="chat-badge">0</span>
                    </button>
                    <div class="chat-panel hidden" id="chat-panel">
                        <div class="chat-header">
                            <span>üí¨ Chat</span>
                            <button class="chat-close" id="chat-close">‚úï</button>
                        </div>
                        <div class="chat-messages" id="chat-messages">
                            <!-- Messages will be inserted here -->
                        </div>
                        <div class="chat-input-container">
                            <input type="text" class="chat-input" id="chat-input" placeholder="Envoyer un message..." maxlength="100">
                            <button class="chat-send" id="chat-send">‚û§</button>
                        </div>
                        <div class="chat-quick-messages">
                            <button class="quick-msg" data-msg="GG !">GG !</button>
                            <button class="quick-msg" data-msg="Bien jou√© üëè">üëè</button>
                            <button class="quick-msg" data-msg="üòÇ">üòÇ</button>
                            <button class="quick-msg" data-msg="üî•">üî•</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Multiplayer Results Screen -->
        <section id="multiplayer-results" class="screen">
            <div class="mp-results-container">
                <div class="mp-results-header">
                    <div class="mp-trophy">üèÜ</div>
                    <h1>Classement final</h1>
                </div>

                <div class="mp-podium" id="mp-podium">
                    <!-- Podium will be inserted here -->
                </div>

                <div class="mp-full-ranking" id="mp-full-ranking">
                    <!-- Full ranking will be inserted here -->
                </div>

                <div class="mp-results-actions">
                    <button class="btn-primary" id="mp-rematch">üîÑ Revanche (m√™me config)</button>
                    <button class="btn-secondary" id="mp-change-theme">üéØ Changer de th√®me</button>
                    <button class="btn-secondary" id="mp-new-game">üéÆ Nouvelle partie</button>
                    <button class="btn-ghost" id="mp-reset-scores">üóëÔ∏è Reset les scores</button>
                    <button class="btn-ghost" id="mp-quit">üè† Quitter</button>
                </div>
            </div>
        </section>

        <!-- Join Game Modal -->
        <div class="modal hidden" id="join-modal">
            <div class="modal-overlay"></div>
            <div class="modal-box">
                <button class="modal-close" id="close-join">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
                <h2 class="modal-title">Rejoindre une partie</h2>
                <p class="auth-subtitle">Entre le code de la partie</p>
                <form id="join-form">
                    <div class="form-group">
                        <input type="text" id="join-code" placeholder="CODE" maxlength="6" style="text-align: center; font-size: 1.5rem; letter-spacing: 0.5rem; text-transform: uppercase;" required>
                    </div>
                    <button type="submit" class="btn-primary btn-full">üéÆ Rejoindre</button>
                </form>
            </div>
        </div>

        <!-- Report Modal -->
        <div class="modal hidden" id="report-modal">
            <div class="modal-overlay"></div>
            <div class="modal-box">
                <button class="modal-close" id="close-report">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
                <h2 class="modal-title">Signaler un probl√®me</h2>
                <form id="report-form">
                    <div class="form-group">
                        <label>Type de probl√®me</label>
                        <select id="report-type" required>
                            <option value="">S√©lectionner...</option>
                            <option value="bug">Bug / Erreur technique</option>
                            <option value="content">Contenu incorrect</option>
                            <option value="suggestion">Suggestion</option>
                            <option value="other">Autre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="report-description" placeholder="D√©crivez le probl√®me en d√©tail..." rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Email (optionnel)</label>
                        <input type="email" id="report-email" placeholder="Pour vous recontacter">
                    </div>
                    <button type="submit" class="btn-primary btn-full">Envoyer le signalement</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <span id="toast-msg"></span>
    </div>

    <script src="app.js"></script>
</body>
</html>
